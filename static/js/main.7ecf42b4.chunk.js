(this.webpackJsonpsp_MovieWeb=this.webpackJsonpsp_MovieWeb||[]).push([[0],{45:function(e,t,a){},47:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var i=a(3),n=a(0),c=a.n(n),r=a(5),s=a.n(r),o=(a(45),a(10)),l=a.n(o),d=a(18),m=a(7),j=(a(47),a(16)),b=a(29),u=a(23),h=a(71),p=a(74),v=a(76),O=a(75),f=Object(h.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center","@media (max-width: 768px)":{margin:"0 auto",width:"85%"},"@media (max-width: 600px)":{margin:"0 auto",padding:"3rem 0",width:"90%"}},paper:{borderRadius:"2px",boxShadow:e.shadows[5],background:"#333",display:"flex",overflow:"hidden",color:"#f8f8f8",padding:0,"@media (max-width: 600px)":{display:"block",padding:0}}}}));var x=function(e){var t=e.movie,a=e.likeNum,c=e.setLikeNum,r=f(),s=Object(n.useState)(!1),o=Object(m.a)(s,2),b=o[0],h=o[1],x=Object(n.useState)([]),g=Object(m.a)(x,2),N=g[0],S=g[1],k=Object(n.useState)(!1),w=Object(m.a)(k,2),y=w[0],T=w[1],_=Object(n.useState)({genres:[],runtime:0}),F=Object(m.a)(_,2),M=F[0],E=F[1],I=function(){var e=Object(d.a)(l.a.mark((function e(){var a,i,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E((function(e){return Object(j.a)({},e)})),a="https://api.themoviedb.org/3/movie/".concat(t.id,"?api_key=b9b45b6a44b88a0c874ff500038859ee"),e.next=4,fetch(a,{method:"GET"});case 4:return i=e.sent,e.next=7,i.json();case 7:n=e.sent,E({genres:n.genres,runtime:n.runtime});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=M.genres,C=M.runtime,J=t.id,L=t.title,P=t.release_date,D=t.poster_path,B=t.vote_average,G=t.overview;return Object(n.useEffect)((function(){!function(){var e=localStorage.getItem("MovieFavor")||"[]",t=(e=JSON.parse(e)).map((function(e){return e.id}));S(t)}()}),[a]),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:"movie-part",onClick:function(){T(!0),I()},children:[Object(i.jsxs)("div",{className:"movie-img",children:[Object(i.jsx)("img",{className:"poster",src:"https://image.tmdb.org/t/p/w500/".concat(D),alt:"",draggable:"false"}),Object(i.jsx)("div",{className:"movie-like ".concat((N.some((function(e){return e===J}))||b)&&"active-movie-like"),onClick:function(e){e.stopPropagation(),function(){var e=[];if(localStorage.getItem("MovieFavor")&&(e=JSON.parse(localStorage.getItem("MovieFavor"))),e.map((function(e){return e.id})).indexOf(J)>-1)h(!b),e=e.filter((function(e){return e.id!==J}));else{var t={id:J,title:L,release_date:P,poster_path:D,vote_average:B,overview:G};e.unshift(t)}localStorage.setItem("MovieFavor",JSON.stringify(e)),c(JSON.parse(localStorage.getItem("MovieFavor").length))}()},children:N.some((function(e){return e===J}))||b?Object(i.jsx)(u.c,{className:"like-icon active-icon"}):Object(i.jsx)(u.d,{className:"like-icon"})})]}),Object(i.jsx)("h2",{children:L}),Object(i.jsx)("p",{children:P})]}),Object(i.jsx)(p.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:r.modal,open:y,onClose:function(){T(!1)},closeAfterTransition:!0,BackdropComponent:v.a,BackdropProps:{timeout:500},children:Object(i.jsx)(O.a,{in:y,children:Object(i.jsxs)("div",{className:r.paper,children:[Object(i.jsxs)("div",{className:"modal-img",children:[Object(i.jsx)("img",{className:"modal-poster",src:"https://image.tmdb.org/t/p/w500/".concat(D),alt:""}),Object(i.jsx)("div",{className:"overlay"})]}),Object(i.jsxs)("div",{className:"modal-body",children:[Object(i.jsxs)("div",{className:"modal-title",children:[Object(i.jsx)("h2",{children:L}),Object(i.jsxs)("p",{children:[Object(i.jsx)("span",{className:"score",children:B})," /10"]})]}),Object(i.jsx)("div",{className:"tag",children:W.map((function(e){return Object(i.jsx)("div",{children:e.name},e.id)}))}),Object(i.jsxs)("div",{className:"movie-detail mt-3",children:[Object(i.jsx)(u.b,{className:"mr-2",style:{height:"22px"}}),P]}),Object(i.jsxs)("div",{className:"movie-detail mb-3",children:[Object(i.jsx)(u.a,{className:"mr-2",style:{height:"22px"}}),parseInt(C/60),"hr ",C%60,"min"]}),Object(i.jsx)("p",{children:G})]})]})})})]})},g=a(28);var N=function(e){var t=e.title,a=e.movieData,c=e.likeNum,r=Object(n.useState)(!0),s=Object(m.a)(r,2),o=s[0],l=s[1],d=function(e){var t=e.children;return Object(g.useMediaQuery)({minWidth:992})?t:null},u=function(e){var t=e.children;return Object(g.useMediaQuery)({minWidth:768,maxWidth:991})?t:null},h=function(e){var t=e.children;return Object(g.useMediaQuery)({maxWidth:767})?t:null};return Object(n.useEffect)((function(){!function(){var e=localStorage.getItem("MovieFavor");l(!!("\u4f60\u559c\u611b\u7684\u96fb\u5f71"!==t||e&&"[]"!==e))}()}),[c]),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h2",{className:"mt-5 mb-3",children:t}),Object(i.jsxs)("div",{className:"movie-wrap",children:[Object(i.jsx)("div",{style:{padding:" 2rem 0.5rem 1rem",color:"#aaa"},hidden:"".concat(o?"hidden":""),children:Object(i.jsx)("h5",{children:"\u76ee\u524d\u559c\u597d\u6e05\u55ae\u662f\u7a7a\u7684\uff0c\u8d95\u7dca\u52a0\u5165\u4f60\u559c\u611b\u7684\u96fb\u5f71\u5427\uff01"})}),Object(i.jsx)(d,{children:Object(i.jsx)(b.a,{itemsToScroll:3,itemsToShow:5,showEmptySlots:!0,children:(a||[]).map((function(t){return Object(i.jsx)(x,Object(j.a)({movie:t},e),t.id)}))})}),Object(i.jsx)(u,{children:Object(i.jsx)(b.a,{itemsToScroll:3,itemsToShow:4,itemPadding:[0,80],showEmptySlots:!0,children:(a||[]).map((function(t){return Object(i.jsx)(x,Object(j.a)({movie:t},e),t.id)}))})}),Object(i.jsx)(h,{children:Object(i.jsx)(b.a,{itemsToScroll:2,itemsToShow:2,itemPadding:[0,75],showEmptySlots:!0,children:(a||[]).map((function(t){return Object(i.jsx)(x,Object(j.a)({movie:t},e),t.id)}))})})]})]})};var S=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),s=Object(m.a)(r,2),o=s[0],j=s[1],b=Object(n.useState)([]),u=Object(m.a)(b,2),h=u[0],p=u[1],v=Object(n.useState)(0),O=Object(m.a)(v,2),f=O[0],x=O[1];return Object(n.useEffect)((function(){(function(){var e=Object(d.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"https://api.themoviedb.org/3/movie/upcoming?api_key=b9b45b6a44b88a0c874ff500038859ee&region=TW",e.next=4,fetch("https://api.themoviedb.org/3/movie/upcoming?api_key=b9b45b6a44b88a0c874ff500038859ee&region=TW",{method:"GET"});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,c(a.results),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()(),function(){var e=Object(d.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"https://api.themoviedb.org/3/movie/now_playing?api_key=b9b45b6a44b88a0c874ff500038859ee&region=TW",e.next=4,fetch("https://api.themoviedb.org/3/movie/now_playing?api_key=b9b45b6a44b88a0c874ff500038859ee&region=TW",{method:"GET"});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,j(a.results),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}()()}),[]),Object(n.useEffect)((function(){!function(){var e=localStorage.getItem("MovieFavor")||"[]";p(JSON.parse(e))}()}),[f]),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("header",{className:"mb-5",children:Object(i.jsx)("div",{className:"container",children:Object(i.jsx)("h1",{children:"Movie Website"})})}),Object(i.jsxs)("main",{className:"container",children:[Object(i.jsx)(N,{title:"\u4f60\u559c\u611b\u7684\u96fb\u5f71",movieData:h,likeNum:f,setLikeNum:x}),Object(i.jsx)(N,{title:"\u4e0a\u6620\u4e2d",movieData:o,likeNum:f,setLikeNum:x}),Object(i.jsx)(N,{title:"\u5373\u5c07\u4e0a\u6620",movieData:a,likeNum:f,setLikeNum:x})]})]})},k=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,78)).then((function(t){var a=t.getCLS,i=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),i(e),n(e),c(e),r(e)}))};s.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(S,{})}),document.getElementById("root")),k()}},[[53,1,2]]]);
//# sourceMappingURL=main.7ecf42b4.chunk.js.map