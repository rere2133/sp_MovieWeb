(this.webpackJsonpsp_MovieWeb=this.webpackJsonpsp_MovieWeb||[]).push([[0],{45:function(e,t,a){},47:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(3),c=a(0),i=a.n(c),r=a(5),s=a.n(r),o=(a(45),a(9)),l=a(11),d=a.n(l),m=a(18),j=a(7),b=(a(47),a(28)),u=a(23),h=a(73),p=a(76),v=a(78),O=a(77),f=Object(h.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center","@media (max-width: 768px)":{margin:"0 auto",width:"85%"},"@media (max-width: 600px)":{margin:"0 auto",padding:"3rem 0",width:"90%"}},paper:{borderRadius:"2px",boxShadow:e.shadows[5],background:"#333",display:"flex",overflow:"hidden",color:"#f8f8f8",padding:0,"@media (max-width: 600px)":{display:"block",padding:0}}}}));var x=function(e){var t=e.movie,a=e.likeNum,i=e.setLikeNum,r=f(),s=Object(c.useState)(!1),l=Object(j.a)(s,2),b=l[0],h=l[1],x=Object(c.useState)([]),g=Object(j.a)(x,2),N=g[0],S=g[1],w=Object(c.useState)(!1),y=Object(j.a)(w,2),k=y[0],T=y[1],_=Object(c.useState)({genres:[],runtime:0}),F=Object(j.a)(_,2),M=F[0],E=F[1],I=function(){var e=Object(m.a)(d.a.mark((function e(){var a,n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E((function(e){return Object(o.a)({},e)})),a="https://api.themoviedb.org/3/movie/".concat(t.id,"?api_key=b9b45b6a44b88a0c874ff500038859ee"),e.next=4,fetch(a,{method:"GET"});case 4:return n=e.sent,e.next=7,n.json();case 7:c=e.sent,E({genres:c.genres,runtime:c.runtime});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=M.genres,C=M.runtime,J=t.id,P=t.title,D=t.release_date,B=t.poster_path,L=t.vote_average,G=t.overview;return Object(c.useEffect)((function(){!function(){var e=localStorage.getItem("MovieFavor")||"[]",t=(e=JSON.parse(e)).map((function(e){return e.id}));S(t)}()}),[a]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"movie-part",onClick:function(){T(!0),I()},children:[Object(n.jsxs)("div",{className:"movie-img",children:[Object(n.jsx)("img",{className:"poster",src:"https://image.tmdb.org/t/p/w500/".concat(B),alt:"",draggable:"false"}),Object(n.jsx)("div",{className:"movie-like ".concat((N.some((function(e){return e===J}))||b)&&"active-movie-like"),onClick:function(e){e.stopPropagation(),function(){var e=[];if(localStorage.getItem("MovieFavor")&&(e=JSON.parse(localStorage.getItem("MovieFavor"))),e.map((function(e){return e.id})).indexOf(J)>-1)h(!b),e=e.filter((function(e){return e.id!==J}));else{var t={id:J,title:P,release_date:D,poster_path:B,vote_average:L,overview:G};e.unshift(t)}localStorage.setItem("MovieFavor",JSON.stringify(e)),i(JSON.parse(localStorage.getItem("MovieFavor").length))}()},children:N.some((function(e){return e===J}))||b?Object(n.jsx)(u.c,{className:"like-icon active-icon"}):Object(n.jsx)(u.d,{className:"like-icon"})})]}),Object(n.jsx)("h2",{children:P}),Object(n.jsx)("p",{children:D})]}),Object(n.jsx)(p.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:r.modal,open:k,onClose:function(){return T(!1)},closeAfterTransition:!0,BackdropComponent:v.a,BackdropProps:{timeout:500},children:Object(n.jsx)(O.a,{in:k,children:Object(n.jsxs)("div",{className:r.paper,children:[Object(n.jsxs)("div",{className:"modal-img",children:[Object(n.jsx)("img",{className:"modal-poster",src:"https://image.tmdb.org/t/p/w500/".concat(B),alt:""}),Object(n.jsx)("div",{className:"overlay"})]}),Object(n.jsxs)("div",{className:"modal-body",children:[Object(n.jsxs)("div",{className:"modal-title",children:[Object(n.jsx)("h2",{children:P}),Object(n.jsxs)("p",{children:[Object(n.jsx)("span",{className:"score",children:L})," /10"]})]}),Object(n.jsx)("div",{className:"tag",children:W.map((function(e){return Object(n.jsx)("div",{children:e.name},e.id)}))}),Object(n.jsxs)("div",{className:"movie-detail mt-3",children:[Object(n.jsx)(u.b,{className:"mr-2",style:{height:"22px"}}),D]}),Object(n.jsxs)("div",{className:"movie-detail mb-3",children:[Object(n.jsx)(u.a,{className:"mr-2",style:{height:"22px"}}),parseInt(C/60),"hr ",C%60,"min"]}),Object(n.jsx)("p",{children:G})]})]})})})]})},g=a(27);var N=function(e){var t=e.title,a=e.movieData,i=e.likeNum,r=Object(c.useState)(!0),s=Object(j.a)(r,2),l=s[0],d=s[1],m=function(e){var t=e.children;return Object(g.useMediaQuery)({minWidth:992})?t:null},u=function(e){var t=e.children;return Object(g.useMediaQuery)({minWidth:768,maxWidth:991})?t:null},h=function(e){var t=e.children;return Object(g.useMediaQuery)({maxWidth:767})?t:null};return Object(c.useEffect)((function(){!function(){var e=localStorage.getItem("MovieFavor");d(!!("\u4f60\u559c\u611b\u7684\u96fb\u5f71"!==t||e&&"[]"!==e))}()}),[i]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{className:"mt-5 mb-3",children:t}),Object(n.jsxs)("div",{className:"movie-wrap",children:[!l&&Object(n.jsx)("div",{style:{padding:" 2rem 0.5rem 1rem",color:"#aaa"},children:Object(n.jsx)("h5",{children:"\u76ee\u524d\u559c\u597d\u6e05\u55ae\u662f\u7a7a\u7684\uff0c\u8d95\u7dca\u52a0\u5165\u4f60\u559c\u611b\u7684\u96fb\u5f71\u5427\uff01"})}),Object(n.jsx)(m,{children:Object(n.jsx)(b.a,{itemsToScroll:3,itemsToShow:5,showEmptySlots:!0,children:(a||[]).map((function(t){return Object(n.jsx)(x,Object(o.a)({movie:t},e),t.id)}))})}),Object(n.jsx)(u,{children:Object(n.jsx)(b.a,{itemsToScroll:3,itemsToShow:4,itemPadding:[0,80],showEmptySlots:!0,children:(a||[]).map((function(t){return Object(n.jsx)(x,Object(o.a)({movie:t},e),t.id)}))})}),Object(n.jsx)(h,{children:Object(n.jsx)(b.a,{itemsToScroll:2,itemsToShow:2,itemPadding:[0,75],showEmptySlots:!0,children:(a||[]).map((function(t){return Object(n.jsx)(x,Object(o.a)({movie:t},e),t.id)}))})})]})]})};var S=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),a=t[0],i=t[1],r=Object(c.useState)(""),s=Object(j.a)(r,2),l=s[0],b=s[1],u=Object(c.useState)([]),h=Object(j.a)(u,2),p=h[0],v=h[1],O=Object(c.useState)(0),f=Object(j.a)(O,2),x=f[0],g=f[1];return Object(c.useEffect)((function(){(function(){var e=Object(m.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"https://api.themoviedb.org/3/movie/upcoming?api_key=b9b45b6a44b88a0c874ff500038859ee&region=TW",e.next=4,fetch("https://api.themoviedb.org/3/movie/upcoming?api_key=b9b45b6a44b88a0c874ff500038859ee&region=TW",{method:"GET"});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,i(a.results),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()(),function(){var e=Object(m.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"https://api.themoviedb.org/3/movie/now_playing?api_key=b9b45b6a44b88a0c874ff500038859ee&region=TW",e.next=4,fetch("https://api.themoviedb.org/3/movie/now_playing?api_key=b9b45b6a44b88a0c874ff500038859ee&region=TW",{method:"GET"});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,b(a.results),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}()()}),[]),Object(c.useEffect)((function(){!function(){var e=localStorage.getItem("MovieFavor")||"[]";v(JSON.parse(e))}()}),[x]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("header",{className:"mb-5",children:Object(n.jsx)("div",{className:"container",children:Object(n.jsx)("h1",{children:"Movie Website"})})}),Object(n.jsx)("main",{className:"container",children:[{title:"\u4f60\u559c\u611b\u7684\u96fb\u5f71",movieData:p},{title:"\u4e0a\u6620\u4e2d",movieData:l},{title:"\u5373\u5c07\u4e0a\u6620",movieData:a}].map((function(e){return Object(n.jsx)(N,Object(o.a)(Object(o.a)({},e),{},{likeNum:x,setLikeNum:g}))}))})]})},w=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,80)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),i(e),r(e)}))};s.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(S,{})}),document.getElementById("root")),w()}},[[55,1,2]]]);
//# sourceMappingURL=main.07103fce.chunk.js.map